### 消息基本信息

### Producer消息投递方式

> 设置Namesrv地址（集群模式使用“;”隔开）
>
> 指定投递到的topic

#### 同步消息

producer发送消息后进入阻塞状态，只有确定消息被broker正常接收（接收到broker正常接收的响应），才返回，进行后面的逻辑。

返回值中得到消息发送到服务端的相关情况

> 可靠性高，用来发送重要的消息通知

#### 异步消息

producer异步的发送消息给broker，发送线程发送后就返回

可以传入**回调函数**处理子线程发送消息的返回结果

> 通常用于响应时间敏感的业务场景

send方法中传入回调函数

```java
producer.send(msg,new SendCallback(){
    @Override
    pulic void onSuccess(SendResult sendResult){
        // balabala
    }
    @Override
    public void onException(Throwable e){
        // balabala
    }
});
```

#### 单向消息

producer发送单向消息后没有返回值，用于不关心发送结果的场景，比如日志

```java
// 该方法没有返回值
producer.sendOneway(msg);
```

### Consumer消息消费方式

> 定义Consumer类型（服务端推push或者客户端拉pull）
>
> 设置Namesrv地址（集群模式使用“;”隔开）
>
> 指定**订阅**的topic和tag过滤表达式
>
> 注册消息监听器，用来处理消费到的消息

#### pull模式和push模式

创建consumer实例时选择

#### 广播模式和负载均衡模式

在consumer设置中`setMessageModel`设置

- `MessageModel.CLUSTERING` 负载均衡模式（**默认**）
- `MessageModel.BROADCAST`广播模式

### 顺序消息

每一个topic有多个队列（默认4个）用来提高读写性能。需要保证消息的顺序性是，只需要把需要保持顺序消息都投递到同一个队列即可（保证局部的顺序性）