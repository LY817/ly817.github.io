(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{531:function(s,t,a){s.exports=a.p+"assets/img/20180721093338663.24137650.png"},633:function(s,t,a){"use strict";a.r(t);var e=a(21),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"restful设计规范"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#restful设计规范"}},[s._v("#")]),s._v(" RESTful设计规范")]),s._v(" "),e("p",[s._v("REST（Representational State Transfer）表象化 状态 转变（表述性状态转变）")]),s._v(" "),e("p",[s._v("REST是一种API的设计风格，基于HTTP。是一组客户端和服务端的行为约束条件和原则")]),s._v(" "),e("ul",[e("li",[s._v("URI:通过URI来定位一个"),e("strong",[s._v("资源")]),s._v("：可以是集合（Collection），也可以是资源（Resource）")]),s._v(" "),e("li",[s._v("METHOD:通过HTTP方法（GET、POST、PUT、DELETE等）来表示对URI资源的"),e("strong",[s._v("操作")])]),s._v(" "),e("li",[s._v("无状态:请求是"),e("strong",[s._v("无状态")]),s._v("的（从客户端到服务端的每个请求都必须包含理解请求所必需的信息）\n"),e("ul",[e("li",[s._v("没有session")]),s._v(" "),e("li",[s._v("通过随请求携带的token，在服务端的缓存中获取状态信息")])])])]),s._v(" "),e("h3",{attrs:{id:"请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#请求"}},[s._v("#")]),s._v(" 请求")]),s._v(" "),e("h4",{attrs:{id:"uri"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uri"}},[s._v("#")]),s._v(" URI")]),s._v(" "),e("ul",[e("li",[s._v("URI必须是名词")]),s._v(" "),e("li",[s._v("通常使用名词的复数形式\n"),e("ul",[e("li",[s._v("默认表示一个集合 "),e("code",[s._v("GET /users")]),s._v("(URI)")]),s._v(" "),e("li",[s._v("需要定位某个资源时，使用 "),e("code",[s._v("GET /users/1001")]),s._v("(URL)")])])]),s._v(" "),e("li",[s._v("版本控制")])]),s._v(" "),e("h4",{attrs:{id:"请求方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#请求方法"}},[s._v("#")]),s._v(" 请求方法")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("GET")]),s._v(" 获取一个指定资源")]),s._v(" "),e("li",[e("code",[s._v("POST")]),s._v(" 创建一个资源")]),s._v(" "),e("li",[e("code",[s._v("PUT")]),s._v(" 更新一个资源（需要提供整个的资源）")]),s._v(" "),e("li",[e("code",[s._v("PATCH")]),s._v(" 更新一个资源（只需要提供待改变部分的资源）")]),s._v(" "),e("li",[e("code",[s._v("DELETE")]),s._v(" 移除一个资源")]),s._v(" "),e("li",[e("code",[s._v("HEAD")]),s._v(" 获取一个资源的元数据：例如最近一次更新时间")]),s._v(" "),e("li",[e("code",[s._v("OPTIONS")]),s._v(" 获取当前用户")])]),s._v(" "),e("h3",{attrs:{id:"响应"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#响应"}},[s._v("#")]),s._v(" 响应")]),s._v(" "),e("p",[s._v("数据接收即可使用，无需拆包")]),s._v(" "),e("blockquote",[e("p",[s._v("封装消息+“捎带”")]),s._v(" "),e("div",{staticClass:"language-http line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-http"}},[e("code",[e("span",{pre:!0,attrs:{class:"token response-status"}},[s._v("HTTP/1.1 "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v("200 OK")])]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("Content-Type:")]),s._v(" application/json"),e("span",{pre:!0,attrs:{class:"token application-json"}},[s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"code"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"data"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rest"')]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("REST语义")]),s._v(" "),e("div",{staticClass:"language-http line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-http"}},[e("code",[e("span",{pre:!0,attrs:{class:"token response-status"}},[s._v("HTTP/1.1 "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v("200 OK")])]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("Content-Type:")]),s._v(" application/json\n"),e("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("code:")]),s._v(" 200"),e("span",{pre:!0,attrs:{class:"token application-json"}},[s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rest"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])])]),s._v(" "),e("p",[s._v("发生错误时，不要返回 200 状态码")]),s._v(" "),e("blockquote",[e("p",[s._v("封装消息+“捎带”")]),s._v(" "),e("div",{staticClass:"language-http line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-http"}},[e("code",[e("span",{pre:!0,attrs:{class:"token response-status"}},[s._v("HTTP/1.1 "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v("200 OK")])]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("Content-Type:")]),s._v(" application/json"),e("span",{pre:!0,attrs:{class:"token application-json"}},[s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"status"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"failure"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"data"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"error"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Expected at least two items in list."')]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("REST语义")]),s._v(" "),e("div",{staticClass:"language-http line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-http"}},[e("code",[e("span",{pre:!0,attrs:{class:"token response-status"}},[s._v("HTTP/1.1 "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v("400 Bad Request")])]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("Content-Type:")]),s._v(" application/json"),e("span",{pre:!0,attrs:{class:"token application-json"}},[s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"error"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Invalid payload."')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"detail"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"surname"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"This field is required."')]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])])]),s._v(" "),e("p",[s._v("以上两种接口方式没有对错")]),s._v(" "),e("p",[s._v("封装消息+捎带的方式可以更好的支持强类型的客户端（Feign）以及规范异常处理（自定义更丰富的异常状态码和异常状态描述）")]),s._v(" "),e("p",[s._v("REST风格的HTTP状态码语义可以作为上一层的语义描述：2xx不触发强类型客户端的异常处理")]),s._v(" "),e("h4",{attrs:{id:"状态码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#状态码"}},[s._v("#")]),s._v(" 状态码")]),s._v(" "),e("p",[s._v("客户端的每一次请求，服务器都必须给出回应。")]),s._v(" "),e("p",[s._v("回应包括 HTTP 状态码和数据两部分，HTTP 状态码就是三位数，分成五类")]),s._v(" "),e("blockquote",[e("ul",[e("li",[e("code",[s._v("1xx")]),s._v("：相关信息")]),s._v(" "),e("li",[e("code",[s._v("2xx")]),s._v("：操作成功")]),s._v(" "),e("li",[e("code",[s._v("3xx")]),s._v("：重定向")]),s._v(" "),e("li",[e("code",[s._v("4xx")]),s._v("：客户端错误")]),s._v(" "),e("li",[e("code",[s._v("5xx")]),s._v("：服务器错误")])])]),s._v(" "),e("p",[e("img",{attrs:{src:a(531),alt:""}})]),s._v(" "),e("h4",{attrs:{id:"响应体"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#响应体"}},[s._v("#")]),s._v(" 响应体")]),s._v(" "),e("p",[s._v("返回的数据格式，不应该是纯文本，而应该是结构化文本表示的数据对象（通常是json或者xml）")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("客户端发送请求时，在header中accept属性设置为"),e("code",[s._v("application/json")]),s._v("，表示响应只接受json格式的数据")])]),s._v(" "),e("li",[e("p",[s._v("服务器的响应的header，也将"),e("code",[s._v("Content-Type")]),s._v("属性要设为"),e("code",[s._v("application/json")])])])]),s._v(" "),e("h1",{attrs:{id:"细节"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#细节"}},[s._v("#")]),s._v(" 细节")]),s._v(" "),e("h3",{attrs:{id:"动词的覆盖"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#动词的覆盖"}},[s._v("#")]),s._v(" 动词的覆盖")]),s._v(" "),e("p",[s._v("有些客户端只能使用"),e("code",[s._v("GET")]),s._v("和"),e("code",[s._v("POST")]),s._v("这两种方法。服务器必须接受"),e("code",[s._v("POST")]),s._v("模拟其他三个方法（"),e("code",[s._v("PUT")]),s._v("、"),e("code",[s._v("PATCH")]),s._v("、"),e("code",[s._v("DELETE")]),s._v("）。")]),s._v(" "),e("p",[s._v("这时，客户端发出的 HTTP 请求，要加上"),e("code",[s._v("X-HTTP-Method-Override")]),s._v("属性，告诉服务器应该使用哪一个动词，覆盖"),e("code",[s._v("POST")]),s._v("方法")]),s._v(" "),e("div",{staticClass:"language-http line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-http"}},[e("code",[e("span",{pre:!0,attrs:{class:"token request-line"}},[e("span",{pre:!0,attrs:{class:"token property"}},[s._v("POST")]),s._v(" /api/Person/4 HTTP/1.1")]),s._v(" \n"),e("span",{pre:!0,attrs:{class:"token header-name keyword"}},[s._v("X-HTTP-Method-Override:")]),s._v(" PUT \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h1",{attrs:{id:"实践"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实践"}},[s._v("#")]),s._v(" 实践")]),s._v(" "),e("h4",{attrs:{id:"使用springmvc构建微服务时-controller方法上不必要映射地址"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用springmvc构建微服务时-controller方法上不必要映射地址"}},[s._v("#")]),s._v(" 使用SpringMVC构建微服务时，controller方法上不必要映射地址")]),s._v(" "),e("h1",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),e("p",[e("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2018/10/restful-api-best-practices.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("阮一峰的网络日志-RESTful API 最佳实践"),e("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=n.exports}}]);