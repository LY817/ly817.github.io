(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{653:function(a,t,s){"use strict";s.r(t);var n=s(21),r=Object(n.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"maven配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#maven配置"}},[a._v("#")]),a._v(" Maven配置")]),a._v(" "),s("p",[a._v("Spring Boot应用的maven配置")]),a._v(" "),s("h2",{attrs:{id:"继承依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#继承依赖"}},[a._v("#")]),a._v(" 继承依赖")]),a._v(" "),s("p",[a._v("SpringBoot应用的pom文件，通过继承"),s("code",[a._v("spring-boot-starter-parent")]),a._v("，获取SpringBoot的特性")]),a._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("parent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("org.springframework.boot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("spring-boot-starter-parent"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("2.0.0.RELEASE"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("relativePath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("parent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("p",[a._v("如果项目已经有了父pom，需要引入SpringBoot特性，但无法继承"),s("code",[a._v("spring-boot-starter-parent")]),a._v("（比如在SpringBoot基础上构建的SpringCloud项目的依赖就是通过添加"),s("code",[a._v("spring-cloud-dependencies")]),a._v("依赖实现的），可以通过引入"),s("code",[a._v("spring-boot-dependencies")]),a._v("依赖来获取SpringBoot特性")]),a._v(" "),s("blockquote",[s("p",[a._v("可以看到 "),s("code",[a._v("spring-boot-starter-parent")]),a._v("继承自"),s("code",[a._v("spring-boot-dependencies")])])]),a._v(" "),s("p",[a._v("通过上述的maven依赖配置，可以获取与当前SpringBoot版本"),s("strong",[a._v("对应")]),a._v("的配置信息（约定版本号）")]),a._v(" "),s("ul",[s("li",[a._v("starter和第三方库的依赖")]),a._v(" "),s("li",[a._v("引入相关maven插件依赖")])]),a._v(" "),s("blockquote",[s("p",[a._v("将SpringBoot版本对应的所有依赖的版本信息都规约"),s("code",[a._v("spring-boot-dependencies")]),a._v("中。")]),a._v(" "),s("p",[a._v("子项目再引用时，不需要配置依赖的版本号，通过继承的"),s("code",[a._v("spring-boot-dependencies")]),a._v("中的配置找到适配版本的依赖")])]),a._v(" "),s("h2",{attrs:{id:"添加插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加插件"}},[a._v("#")]),a._v(" 添加插件")]),a._v(" "),s("p",[a._v("SpringBoot应用需要在pom引入spring-boot-maven-plugin开启SpringBoot相关功能")]),a._v(" "),s("ul",[s("li",[a._v("打包：fat jar，war")])]),a._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[a._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n     "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("plugins")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n         "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("plugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n             "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("org.springframework.boot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n             "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("spring-boot-maven-plugin"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n         "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("plugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n     "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("plugins")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("h2",{attrs:{id:"添加依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加依赖"}},[a._v("#")]),a._v(" 添加依赖")]),a._v(" "),s("p",[a._v("根据需要，在pom文件中引入第三方库的starter依赖，不需要版本号，使用parent中规约的对应版本号")]),a._v(" "),s("h1",{attrs:{id:"打包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包"}},[a._v("#")]),a._v(" 打包")]),a._v(" "),s("p",[a._v("pom文件中引入spring-boot-maven-plugin依赖后，通过"),s("code",[a._v("mvn package")]),a._v("打包")]),a._v(" "),s("h2",{attrs:{id:"jar"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jar"}},[a._v("#")]),a._v(" jar")]),a._v(" "),s("h3",{attrs:{id:"目录结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[a._v("#")]),a._v(" 目录结构")]),a._v(" "),s("p",[a._v("fat jar解压后的文件目录")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("BOOT-INF/classes")]),a._v(" "),s("p",[a._v("包编译后的class文件")])]),a._v(" "),s("li",[s("p",[a._v("BOT-INF/lib")]),a._v(" "),s("p",[a._v("应用依赖的JAR包")])]),a._v(" "),s("li",[s("p",[a._v("META-INF")]),a._v(" "),s("p",[a._v("应用相关的元信息，如MANIFEST.MF文件和maven配置")]),a._v(" "),s("p",[a._v("MANIFEST.MF作为jar包的说明文件，指定启动类为JarLauncher，并为SpringBoot启动的扩展属性")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("Manifest-Version: 1.0\nImplementation-Title: sparrow-eureka-server\nImplementation-Version: 1.0-SNAPSHOT\nBuilt-By: admin\nImplementation-Vendor-Id: org.ly817\nSpring-Boot-Version: 2.0.0.RELEASE\nMain-Class: org.springframework.boot.loader.JarLauncher\nStart-Class: org.ly817.server.SparrowEurekaServerApplication\nSpring-Boot-Classes: BOOT-INF/classes/\nSpring-Boot-Lib: BOOT-INF/lib/\nCreated-By: Apache Maven 3.3.9\nBuild-Jdk: 1.8.0_60\nImplementation-URL: https://projects.spring.io/spring-boot/#/spring-boot-starter-parent/sparrow/sparrow-eureka-server\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br")])]),s("ul",[s("li",[a._v("Main-Class：定义jar文件的入口类，该类必须是含有main方法的可执行类，定义了该属性即可通过")]),a._v(" "),s("li",[a._v("Start-Class：指定SpringBoot应用的入口类")]),a._v(" "),s("li",[a._v("Spring-Boot-Classes：指定SpringBoot应用项目的编译后的字节码文件目录")]),a._v(" "),s("li",[a._v("Spring-Boot-Lib：指定SpringBoot应用项目第三方依赖库目录")])])]),a._v(" "),s("li",[s("p",[a._v("org.springframework.boot.loader包")]),a._v(" "),s("p",[a._v("SpringBoot jar包启动的实现")]),a._v(" "),s("p",[a._v("使用java -jar命令实际上是执行"),s("code",[a._v("org.springframework.boot.loader.JarLauncher")]),a._v("中的main方法")])])]),a._v(" "),s("h2",{attrs:{id:"war"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#war"}},[a._v("#")]),a._v(" war")]),a._v(" "),s("p",[a._v("SpringBoot同样也支持生成war包，部署到web容器中")]),a._v(" "),s("h3",{attrs:{id:"打包设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包设置"}},[a._v("#")]),a._v(" 打包设置")]),a._v(" "),s("p",[a._v("默认情况打包会生成jar包，")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("在pom文件中配置"),s("code",[a._v("<packaging>war</packaging>")])])]),a._v(" "),s("li",[s("p",[a._v("设置打包时排除tomcat依赖，有web容器提供")]),a._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("org.springframework.boot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("spring-boot-starter-tomcat"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("scope")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("provided"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("scope")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[a._v("默认情况下，tomcat的依赖会被作为内置web容器实现引入，需要排除tomcat依赖放在与web容器冲突")])]),a._v(" "),s("li",[s("p",[a._v("SpringBootServletInitializer")]),a._v(" "),s("p",[a._v("SpringBoot的启动类继承SpringBootServletInitializer")]),a._v(" "),s("p",[a._v("可以通过重写SpringBootServletInitializer的方法来对web的相关对象进行自定义操作（如servlet、listener，替代传统的web.xml配置）")])])]),a._v(" "),s("blockquote",[s("p",[a._v("关于web.xml")]),a._v(" "),s("p",[a._v("SpringBoot遵循"),s("a",{attrs:{href:"https://jcp.org/en/jsr/detail?id=315",target:"_blank",rel:"noopener noreferrer"}},[a._v("Servlet 3.0规范 JSR 315"),s("OutboundLink")],1),a._v("，通过Servlet 3.0提供的接口"),s("code",[a._v("javax.servlet.ServletContainerInitializer")]),a._v("，结合SPI机制，在"),s("code",[a._v("spring-web")]),a._v("包下发现"),s("code",[a._v("META-INF/services/javax.servlet.ServletContainerInitializer")]),a._v("实现类："),s("code",[a._v("org.springframework.web.SpringServletContainerInitializer")]),a._v("从而进行初始化，包括对"),s("code",[a._v("DispatcherServlet")]),a._v("的注册，"),s("code",[a._v("ContextLoaderListener")]),a._v("的注册等等，最终免去"),s("code",[a._v("web.xml")])])]),a._v(" "),s("h3",{attrs:{id:"目录结构-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目录结构-2"}},[a._v("#")]),a._v(" 目录结构")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("WEB-INF")]),a._v(" "),s("p",[a._v("与正常的war包一样")]),a._v(" "),s("ul",[s("li",[a._v("lib")]),a._v(" "),s("li",[a._v("lib-privided")]),a._v(" "),s("li",[a._v("classes")]),a._v(" "),s("li",[a._v("web.xml")])])]),a._v(" "),s("li",[s("p",[a._v("META-INF")]),a._v(" "),s("p",[a._v("应用相关的元信息，如MANIFEST.MF文件和maven配置")]),a._v(" "),s("p",[a._v("与fat jar不同的是MANIFEST.MF中Main-Class的值改为了 org.springframework.boot.loader."),s("strong",[a._v("JarLauncher")])])]),a._v(" "),s("li",[s("p",[a._v("org.springframework.boot.loader包")]),a._v(" "),s("p",[a._v("SpringBoot应用加载器")])])]),a._v(" "),s("h1",{attrs:{id:"启动原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动原理"}},[a._v("#")]),a._v(" 启动原理")]),a._v(" "),s("p",[a._v("从上述jar文件目录结构可以推测，在使用maven插件生成SpringBoot项目的jar包时，执行完正常的编译打包后，会进行repackage操作，生成我们最后看到的fat jar文件")]),a._v(" "),s("p",[a._v("SpringBoot件被放到BOOT-INF/classes目录下；项目的依赖库被放到BOOT-INF/lib目录（普通的jar不会包含所依赖的jar文件）。")]),a._v(" "),s("p",[a._v("fat jar文件的根目录，存放的是spring-boot-loader（"),s("code",[a._v("org.springframework.boot.loader")]),a._v("）包，使用java -jar启动SpringBoot fat jar时，实际上是读取META_INF/MANIFEST.MF文件中的Main-class属性，执行"),s("code",[a._v("org.springframework.boot.loader.JarLauncher")])]),a._v(" "),s("h2",{attrs:{id:"spring-boot-loader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring-boot-loader"}},[a._v("#")]),a._v(" spring-boot-loader")]),a._v(" "),s("p",[a._v("SpringBoot生成的fat jar和war包实际上是通过spring-boot-loader启动")]),a._v(" "),s("h3",{attrs:{id:"launcher"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#launcher"}},[a._v("#")]),a._v(" Launcher")]),a._v(" "),s("p",[a._v("SpringBoot启动的基本实现类")]),a._v(" "),s("h4",{attrs:{id:"基本流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本流程"}},[a._v("#")]),a._v(" 基本流程")]),a._v(" "),s("ul",[s("li",[a._v("读取MANIFEST.MF文件中的Start-Class，获取SpringBootApplication启动类路径")]),a._v(" "),s("li",[a._v("为SpringBoot应用加载启动所需的"),s("strong",[a._v("classpath")]),a._v("运行环境（lib依赖包，配置文件）")]),a._v(" "),s("li",[a._v("通过MainMethodRunner，调用SpringBootApplication启动类")])]),a._v(" "),s("h4",{attrs:{id:"实现子类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实现子类"}},[a._v("#")]),a._v(" 实现子类")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("ExecutableArchiveLauncher")]),a._v(" "),s("p",[a._v("读取MANIFEST.MF文件中的Start-Class，获取SpringBoot启动类")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("JarLauncher")]),a._v(" "),s("p",[a._v("加载fat jar中的相关资源")])]),a._v(" "),s("li",[s("p",[a._v("WarLauncher")]),a._v(" "),s("p",[a._v("加载war中相关资源")])])])])]),a._v(" "),s("h3",{attrs:{id:"archive-资源文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#archive-资源文档"}},[a._v("#")]),a._v(" Archive 资源文档")]),a._v(" "),s("p",[a._v("在spring boot里，抽象出了Archive的概念")]),a._v(" "),s("p",[a._v("一个archive可以是一个jar（JarFileArchive），也可以是一个文件目录（ExplodedArchive）。可以理解为Spring boot抽象出来的统一访问资源的层")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("abstract")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Archive")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 每一个Archive对应一个URL 表示文件位置")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("abstract")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("URL")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getUrl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getMainClass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("abstract")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Collection")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Entry")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getEntries")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 获取嵌套的子文档")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("abstract")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Archive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getNestedArchives")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("EntryFilter")]),a._v(" filter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("h3",{attrs:{id:"mainmethodrunner"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mainmethodrunner"}},[a._v("#")]),a._v(" MainMethodRunner")]),a._v(" "),s("p",[a._v("利用Java反射调用SpringBootApplication启动类的main方法，启动SpringBoot应用")]),a._v(" "),s("h1",{attrs:{id:"运行方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#运行方式"}},[a._v("#")]),a._v(" 运行方式")]),a._v(" "),s("h2",{attrs:{id:"开发阶段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发阶段"}},[a._v("#")]),a._v(" 开发阶段")]),a._v(" "),s("h3",{attrs:{id:"main方法启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#main方法启动"}},[a._v("#")]),a._v(" main方法启动")]),a._v(" "),s("p",[a._v("开发中最常用的方式，运行SpringBoot入口类的main方法")]),a._v(" "),s("h3",{attrs:{id:"maven插件启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#maven插件启动"}},[a._v("#")]),a._v(" maven插件启动")]),a._v(" "),s("p",[a._v("引入spring-boot-maven-plugin插件，在pom文件同级目录下，通过"),s("code",[a._v("mvn spring-boot:run")]),a._v("启动SpringBoot应用")]),a._v(" "),s("p",[a._v("传入命令行参数："),s("code",[a._v('mvn spring-boot:run -Drun.arguments="--server.port=8888"')])]),a._v(" "),s("h2",{attrs:{id:"部署阶段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署阶段"}},[a._v("#")]),a._v(" 部署阶段")]),a._v(" "),s("h3",{attrs:{id:"jar包启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jar包启动"}},[a._v("#")]),a._v(" jar包启动")]),a._v(" "),s("p",[a._v("使用SpringBoot打包插件生成的fat jar包后，通过命令"),s("code",[a._v("java -jar spring-app-0.0.1.SNAPSHOT.jar")]),a._v(" 启动SpringBoot项目")]),a._v(" "),s("p",[a._v("传入命令行参数："),s("code",[a._v("java -jar spring-app.jar --server.port=8081")])]),a._v(" "),s("h3",{attrs:{id:"war包容器启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#war包容器启动"}},[a._v("#")]),a._v(" war包容器启动")]),a._v(" "),s("p",[a._v("按上述步骤生成war包，通过web容器启动")])])}),[],!1,null,null,null);t.default=r.exports}}]);